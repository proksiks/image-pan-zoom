{"version":3,"file":"image-pan-zoom.mjs","sources":["../src/index.ts"],"sourcesContent":["/**\r\n * ImagePanZoom - A lightweight library for pan and zoom functionality\r\n * @version 1.0.0\r\n */\r\n\r\n/**\r\n * Options for configuring the ImagePanZoom behavior\r\n */\r\nexport interface ImagePanZoomOptions {\r\n  /**\r\n   * Minimum scale value (default: 0.5)\r\n   */\r\n  minScale?: number\r\n  /**\r\n   * Maximum scale value (default: 3)\r\n   */\r\n  maxScale?: number\r\n  /**\r\n   * Initial scale value (default: 1)\r\n   */\r\n  initialScale?: number\r\n  /**\r\n   * Speed of zoom via mouse wheel (default: 0.0015)\r\n   */\r\n  wheelZoomSpeed?: number\r\n  /**\r\n   * Padding for boundaries in percentage (default: 0.1)\r\n   */\r\n  boundsPadding?: number\r\n  /**\r\n   * Friction coefficient for kinetic motion (default: 0.92)\r\n   */\r\n  friction?: number\r\n  /**\r\n   * Maximum speed for kinetic motion (default: 300)\r\n   */\r\n  maxSpeed?: number\r\n  /**\r\n   * Enable smooth transitions (default: false)\r\n   */\r\n  transition?: boolean\r\n  /**\r\n   * Speed for pinch zoom (default: 1)\r\n   */\r\n  pinchSpeed?: number\r\n}\r\n\r\n/**\r\n * Represents the current transformation state\r\n */\r\nexport interface Transform {\r\n  /**\r\n   * Current scale value\r\n   */\r\n  scale: number\r\n  /**\r\n   * X offset position\r\n   */\r\n  x: number\r\n  /**\r\n   * Y offset position\r\n   */\r\n  y: number\r\n  /**\r\n   * Rotation angle in degrees\r\n   */\r\n  rotation: number\r\n}\r\n\r\nexport class ImagePanZoom {\r\n  private container: HTMLElement\r\n  private content: HTMLElement\r\n  private options: Required<ImagePanZoomOptions>\r\n\r\n  private scale: number\r\n  private x: number\r\n  private y: number\r\n  private rotation: number\r\n\r\n  private isPanning: boolean = false\r\n  private didMove: boolean = false\r\n  private startClientX: number = 0\r\n  private startClientY: number = 0\r\n  private startX: number = 0\r\n  private startY: number = 0\r\n\r\n  private velocityX: number = 0\r\n  private velocityY: number = 0\r\n  private velocityScale: number = 0\r\n  private lastMoveTime: number = 0\r\n  private lastClientX: number = 0\r\n  private lastClientY: number = 0\r\n  private lastScale: number = 1\r\n  private animationFrameId: number | null = null\r\n\r\n  private readonly DRAG_THRESHOLD = 3\r\n\r\n  private touchStartDistance: number = 0\r\n  private touchStartScale: number = 1\r\n  private touchCenterX: number = 0\r\n  private touchCenterY: number = 0\r\n  private isPinching: boolean = false\r\n  private lastTouchCenterX: number = 0\r\n  private lastTouchCenterY: number = 0\r\n\r\n  private isTransitioning: boolean = false\r\n  private transitionTimeout: number | null = null\r\n\r\n  private boundWheel: (e: WheelEvent) => void\r\n  private boundPointerDown: (e: PointerEvent) => void\r\n  private boundPointerMove: (e: PointerEvent) => void\r\n  private boundPointerUp: (e: PointerEvent) => void\r\n  private boundDoubleClick: (e: MouseEvent) => void\r\n  private boundTouchStart: (e: TouchEvent) => void\r\n  private boundTouchMove: (e: TouchEvent) => void\r\n  private boundTouchEnd: (e: TouchEvent) => void\r\n\r\n  constructor(container: HTMLElement, content: HTMLElement, options: ImagePanZoomOptions = {}) {\r\n    this.container = container\r\n    this.content = content\r\n    this.options = {\r\n      minScale: options.minScale ?? 0.5,\r\n      maxScale: options.maxScale ?? 3,\r\n      initialScale: options.initialScale ?? 1,\r\n      wheelZoomSpeed: options.wheelZoomSpeed ?? 0.0015,\r\n      boundsPadding: options.boundsPadding ?? 0.1,\r\n      friction: options.friction ?? 0.92,\r\n      maxSpeed: options.maxSpeed ?? 300,\r\n      transition: options.transition ?? false,\r\n      pinchSpeed: options.pinchSpeed ?? 1,\r\n    }\r\n\r\n    this.scale = this.options.initialScale\r\n    this.x = 0\r\n    this.y = 0\r\n    this.rotation = 0\r\n    this.lastScale = this.options.initialScale\r\n\r\n    this.boundWheel = this.onWheel.bind(this)\r\n    this.boundPointerDown = this.onPointerDown.bind(this)\r\n    this.boundPointerMove = this.onPointerMove.bind(this)\r\n    this.boundPointerUp = this.onPointerUp.bind(this)\r\n    this.boundDoubleClick = this.onDoubleClick.bind(this)\r\n    this.boundTouchStart = this.onTouchStart.bind(this)\r\n    this.boundTouchMove = this.onTouchMove.bind(this)\r\n    this.boundTouchEnd = this.onTouchEnd.bind(this)\r\n\r\n    this.init()\r\n  }\r\n\r\n  /**\r\n   * Initializes the pan and zoom functionality.\r\n   * Sets touch-action and user-select CSS properties on the content element.\r\n   * If transition is enabled, sets the transition CSS property on the content element.\r\n   * Applies the initial transform to the content element.\r\n   * Attaches wheel, pointerdown, pointermove, and pointerup event listeners.\r\n   */\r\n  private init(): void {\r\n    this.content.style.touchAction = 'none'\r\n    this.content.style.userSelect = 'none'\r\n\r\n    this.applyTransform()\r\n    this.attachEvents()\r\n  }\r\n\r\n  private attachEvents(): void {\r\n    this.container.addEventListener('wheel', this.boundWheel, { passive: false })\r\n    this.content.addEventListener('pointerdown', this.boundPointerDown)\r\n    this.content.addEventListener('dblclick', this.boundDoubleClick)\r\n    window.addEventListener('pointermove', this.boundPointerMove)\r\n    window.addEventListener('pointerup', this.boundPointerUp)\r\n\r\n\r\n    this.container.addEventListener('touchstart', this.boundTouchStart, { passive: false })\r\n    this.container.addEventListener('touchmove', this.boundTouchMove, { passive: false })\r\n    this.container.addEventListener('touchend', this.boundTouchEnd, { passive: false })\r\n  }\r\n\r\n  /**\r\n   * Calculate and return the sizes of container and content elements\r\n   * @returns Object containing container width/height, padding, and scaled content dimensions\r\n   */\r\n  private getSizes() {\r\n    const contRect = this.container.getBoundingClientRect()\r\n    const contW = contRect.width\r\n    const contH = contRect.height\r\n    const pad = Math.min(contW, contH) * this.options.boundsPadding\r\n\r\n    const rawW = this.content.offsetWidth\r\n    const rawH = this.content.offsetHeight\r\n    const w = rawW * this.scale\r\n    const h = rawH * this.scale\r\n\r\n    return { contW, contH, pad, w, h }\r\n  }\r\n\r\n  private clampPosition(nextX: number, nextY: number): { x: number; y: number } {\r\n    const { contW, contH, pad, w, h } = this.getSizes()\r\n\r\n    const fitsHorizontally = w <= contW\r\n    const fitsVertically = h <= contH\r\n\r\n    let minX: number, maxX: number, minY: number, maxY: number\r\n    if (fitsHorizontally) {\r\n      minX = maxX = 0\r\n    } else {\r\n      const halfContW = contW / 2\r\n      const halfW = w / 2\r\n\r\n      maxX = halfW - halfContW + pad\r\n      minX = -(halfW - halfContW) - pad\r\n    }\r\n\r\n    if (fitsVertically) {\r\n      minY = maxY = 0\r\n    } else {\r\n      const halfContH = contH / 2\r\n      const halfH = h / 2\r\n\r\n      maxY = halfH - halfContH + pad\r\n      minY = -(halfH - halfContH) - pad\r\n    }\r\n\r\n    const clampedX = fitsHorizontally ? 0 : Math.min(maxX, Math.max(minX, nextX))\r\n    const clampedY = fitsVertically ? 0 : Math.min(maxY, Math.max(minY, nextY))\r\n\r\n    return { x: clampedX, y: clampedY }\r\n  }\r\n\r\n  private applyTransform(useTransition: boolean = false): void {\r\n    this.container.style.overflow = 'hidden'\r\n    if (!this.container.style.position) {\r\n      this.container.style.position = 'relative'\r\n    }\r\n\r\n    this.container.style.minHeight = '25vh'\r\n    this.content.style.position = 'absolute'\r\n    this.content.style.top = '50%'\r\n    this.content.style.left = '50%'\r\n    this.content.style.transformOrigin = '50% 50%'\r\n\r\n    const clamped = this.clampPosition(this.x, this.y)\r\n    this.x = clamped.x\r\n    this.y = clamped.y\r\n\r\n    // Управляем transition в зависимости от контекста\r\n    if (this.options.transition && useTransition && !this.isTransitioning) {\r\n      this.content.style.transition = 'transform 0.3s ease-out'\r\n      this.isTransitioning = true\r\n\r\n      // Сбрасываем transition после анимации\r\n      if (this.transitionTimeout) {\r\n        clearTimeout(this.transitionTimeout)\r\n      }\r\n      this.transitionTimeout = window.setTimeout(() => {\r\n        this.content.style.transition = ''\r\n        this.isTransitioning = false\r\n        this.transitionTimeout = null\r\n      }, 300)\r\n    } else if (!useTransition) {\r\n      // Для интерактивных изменений отключаем transition\r\n      this.content.style.transition = 'none'\r\n      this.isTransitioning = false\r\n    }\r\n\r\n    this.content.style.transform = `translate(-50%, -50%) translate(${this.x}px, ${this.y}px) rotate(${this.rotation}deg) scale(${this.scale})`\r\n  }\r\n\r\n  private clampScale(next: number): number {\r\n    return Math.min(this.options.maxScale, Math.max(this.options.minScale, next))\r\n  }\r\n\r\n  private stopAnimation(): void {\r\n    if (this.animationFrameId !== null) {\r\n      cancelAnimationFrame(this.animationFrameId)\r\n      this.animationFrameId = null\r\n    }\r\n  }\r\n\r\n  private zoomToPoint(clientX: number, clientY: number, deltaScale: number): void {\r\n    const rect = this.container.getBoundingClientRect()\r\n    const prevScale = this.scale\r\n    const nextScale = this.clampScale(prevScale * deltaScale)\r\n\r\n    if (nextScale === prevScale) return\r\n\r\n    const cx = clientX - rect.left\r\n    const cy = clientY - rect.top\r\n    const centerX = rect.width / 2\r\n    const centerY = rect.height / 2\r\n\r\n    const localX = cx - centerX - this.x\r\n    const localY = cy - centerY - this.y\r\n\r\n    const k = nextScale / prevScale\r\n    const newLocalX = localX * k\r\n    const newLocalY = localY * k\r\n\r\n    this.scale = nextScale\r\n    this.x += localX - newLocalX\r\n    this.y += localY - newLocalY\r\n\r\n    this.applyTransform(false)\r\n  }\r\n\r\n  private animateKinetic = (): void => {\r\n    if (Math.abs(this.velocityX) < 0.5 && Math.abs(this.velocityY) < 0.5 && Math.abs(this.velocityScale) < 0.001) {\r\n      this.stopAnimation()\r\n      this.applyTransform(false)\r\n      return\r\n    }\r\n\r\n    this.x += this.velocityX\r\n    this.y += this.velocityY\r\n    this.scale += this.velocityScale\r\n\r\n    this.scale = this.clampScale(this.scale)\r\n\r\n    this.velocityX *= this.options.friction\r\n    this.velocityY *= this.options.friction\r\n    this.velocityScale *= this.options.friction\r\n\r\n    this.applyTransform(false)\r\n    this.animationFrameId = requestAnimationFrame(this.animateKinetic)\r\n  }\r\n\r\n  private onWheel(e: WheelEvent): void {\r\n    e.preventDefault()\r\n    this.stopAnimation()\r\n    this.velocityX = 0\r\n    this.velocityY = 0\r\n    this.velocityScale = 0\r\n\r\n    const delta = -e.deltaY * this.options.wheelZoomSpeed\r\n    const factor = 1 + delta\r\n    if (factor === 0) return\r\n\r\n    this.zoomToPoint(e.clientX, e.clientY, factor)\r\n  }\r\n\r\n  private onPointerDown(e: PointerEvent): void {\r\n    if (e.button !== 0) return\r\n\r\n    this.stopAnimation()\r\n\r\n    this.isPanning = true\r\n    this.didMove = false\r\n    this.startClientX = e.clientX\r\n    this.startClientY = e.clientY\r\n    this.startX = this.x\r\n    this.startY = this.y\r\n\r\n    this.lastClientX = e.clientX\r\n    this.lastClientY = e.clientY\r\n    this.lastScale = this.scale\r\n    this.lastMoveTime = Date.now()\r\n    this.velocityX = 0\r\n    this.velocityY = 0\r\n    this.velocityScale = 0\r\n\r\n    this.content.setPointerCapture(e.pointerId)\r\n  }\r\n\r\n  private onPointerMove(e: PointerEvent): void {\r\n    if (!this.isPanning) return\r\n\r\n    const dx = e.clientX - this.startClientX\r\n    const dy = e.clientY - this.startClientY\r\n\r\n    if (!this.didMove && Math.hypot(dx, dy) < this.DRAG_THRESHOLD) return\r\n    this.didMove = true\r\n\r\n    const nextX = this.startX + dx\r\n    const nextY = this.startY + dy\r\n\r\n    this.x = nextX\r\n    this.y = nextY\r\n\r\n    const now = Date.now()\r\n    const dt = now - this.lastMoveTime\r\n    if (dt > 0) {\r\n      const vx = (e.clientX - this.lastClientX) / dt * 16\r\n      const vy = (e.clientY - this.lastClientY) / dt * 16\r\n      const scaleDiff = this.scale - this.lastScale\r\n      const scaleVelocity = scaleDiff / dt * 16\r\n\r\n      this.velocityX = Math.max(-this.options.maxSpeed, Math.min(this.options.maxSpeed, vx))\r\n      this.velocityY = Math.max(-this.options.maxSpeed, Math.min(this.options.maxSpeed, vy))\r\n      this.velocityScale = Math.max(-0.01, Math.min(0.01, scaleVelocity))\r\n    }\r\n\r\n    this.lastClientX = e.clientX\r\n    this.lastClientY = e.clientY\r\n    this.lastScale = this.scale\r\n    this.lastMoveTime = now\r\n\r\n    this.applyTransform(false)\r\n  }\r\n\r\n  private onPointerUp(e: PointerEvent): void {\r\n    if (!this.isPanning) return\r\n    this.isPanning = false\r\n\r\n    try {\r\n      this.content.releasePointerCapture(e.pointerId)\r\n    } catch { }\r\n\r\n    if (this.didMove && (Math.abs(this.velocityX) > 1 || Math.abs(this.velocityY) > 1 || Math.abs(this.velocityScale) > 0.001)) {\r\n      this.animationFrameId = requestAnimationFrame(this.animateKinetic)\r\n    }\r\n  }\r\n\r\n  private onDoubleClick(e: MouseEvent): void {\r\n    this.stopAnimation()\r\n    const rect = this.container.getBoundingClientRect()\r\n    const centerX = rect.width / 2\r\n    const centerY = rect.height / 2\r\n    const clickX = e.clientX - rect.left\r\n    const clickY = e.clientY - rect.top\r\n\r\n    const targetScale = Math.min(this.scale * 1.5, this.options.maxScale)\r\n    const scaleRatio = targetScale / this.scale\r\n\r\n    const localX = clickX - centerX - this.x\r\n    const localY = clickY - centerY - this.y\r\n    this.scale = targetScale\r\n\r\n    const newLocalX = localX * scaleRatio\r\n    const newLocalY = localY * scaleRatio\r\n    this.x += localX - newLocalX\r\n    this.y += localY - newLocalY\r\n\r\n    this.applyTransform(true)\r\n  }\r\n\r\n\r\n  private onTouchStart(e: TouchEvent): void {\r\n    if (e.touches.length === 2) {\r\n\r\n      e.preventDefault();\r\n      this.stopAnimation();\r\n      this.isPinching = true;\r\n      this.velocityX = 0;\r\n      this.velocityY = 0;\r\n      this.velocityScale = 0;\r\n\r\n      const touch1 = e.touches[0];\r\n      const touch2 = e.touches[1];\r\n\r\n      const dist = Math.hypot(\r\n        touch1.clientX - touch2.clientX,\r\n        touch1.clientY - touch2.clientY\r\n      );\r\n\r\n      this.touchCenterX = (touch1.clientX + touch2.clientX) / 2;\r\n      this.touchCenterY = (touch1.clientY + touch2.clientY) / 2;\r\n      this.lastTouchCenterX = this.touchCenterX;\r\n      this.lastTouchCenterY = this.touchCenterY;\r\n\r\n      this.touchStartDistance = dist;\r\n      this.touchStartScale = this.scale;\r\n\r\n      this.isPanning = false;\r\n      this.didMove = false;\r\n    } else if (e.touches.length === 1) {\r\n\r\n      const touch = e.touches[0];\r\n      const syntheticEvent = new PointerEvent('pointerdown', {\r\n        clientX: touch.clientX,\r\n        clientY: touch.clientY,\r\n        button: 0\r\n      });\r\n      this.onPointerDown(syntheticEvent);\r\n    }\r\n  }\r\n\r\n  private onTouchMove(e: TouchEvent): void {\r\n    if (e.touches.length === 2 && this.isPinching) {\r\n      e.preventDefault()\r\n\r\n      const touch1 = e.touches[0]\r\n      const touch2 = e.touches[1]\r\n\r\n      // Calculate the current distance between touches\r\n      const currentDist = Math.hypot(\r\n        touch1.clientX - touch2.clientX,\r\n        touch1.clientY - touch2.clientY\r\n      )\r\n\r\n      // Calculate the current center point\r\n      const currentCenterX = (touch1.clientX + touch2.clientX) / 2\r\n      const currentCenterY = (touch1.clientY + touch2.clientY) / 2\r\n\r\n      // Calculate scale change\r\n      const scaleMultiplier = currentDist / this.touchStartDistance\r\n      const newScale = this.touchStartScale * scaleMultiplier * this.options.pinchSpeed\r\n      const clampedScale = this.clampScale(newScale)\r\n\r\n      if (clampedScale !== this.scale) {\r\n        // Calculate delta for panning during pinch\r\n        const deltaX = currentCenterX - this.lastTouchCenterX\r\n        const deltaY = currentCenterY - this.lastTouchCenterY\r\n\r\n        // Apply panning first\r\n        this.x += deltaX\r\n        this.y += deltaY\r\n\r\n        // Then apply zoom with fixed center (from touch start)\r\n        const scaleFactor = clampedScale / this.scale\r\n        this.zoomToPoint(this.touchCenterX, this.touchCenterY, scaleFactor)\r\n\r\n        // Update last touch center for next movement\r\n        this.lastTouchCenterX = currentCenterX\r\n        this.lastTouchCenterY = currentCenterY\r\n      }\r\n    } else if (e.touches.length === 1 && !this.isPinching) {\r\n      const touch = e.touches[0]\r\n      const syntheticEvent = new PointerEvent('pointermove', {\r\n        clientX: touch.clientX,\r\n        clientY: touch.clientY\r\n      })\r\n      this.onPointerMove(syntheticEvent)\r\n    }\r\n  }\r\n\r\n  private onTouchEnd(e: TouchEvent): void {\r\n    if (this.isPinching && e.touches.length < 2) {\r\n      this.isPinching = false;\r\n\r\n      const now = Date.now();\r\n      const dt = now - this.lastMoveTime;\r\n      if (dt > 0 && dt < 100) {\r\n        const vx = (this.lastTouchCenterX - this.touchCenterX) / dt * 16;\r\n        const vy = (this.lastTouchCenterY - this.touchCenterY) / dt * 16;\r\n\r\n        this.velocityX = Math.max(-this.options.maxSpeed, Math.min(this.options.maxSpeed, vx));\r\n        this.velocityY = Math.max(-this.options.maxSpeed, Math.min(this.options.maxSpeed, vy));\r\n\r\n        if (Math.abs(this.velocityX) > 1 || Math.abs(this.velocityY) > 1) {\r\n          this.animationFrameId = requestAnimationFrame(this.animateKinetic);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (e.touches.length === 0) {\r\n      if (this.isPanning) {\r\n        const syntheticEvent = new PointerEvent('pointerup', {\r\n          clientX: 0,\r\n          clientY: 0,\r\n          button: 0\r\n        });\r\n        this.onPointerUp(syntheticEvent);\r\n      }\r\n      this.isPinching = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Reset transform to initial state\r\n   */\r\n  public reset(): void {\r\n    this.stopAnimation()\r\n    this.scale = this.options.initialScale\r\n    this.x = 0\r\n    this.y = 0\r\n    this.rotation = 0\r\n    this.velocityX = 0\r\n    this.velocityY = 0\r\n    this.velocityScale = 0\r\n    \r\n    // Для reset используем transition, если включена опция\r\n    this.applyTransform(true)\r\n  }\r\n\r\n  /**\r\n   * Rotate content by specified degrees\r\n   * @param deg - Degrees to rotate\r\n   */\r\n  public rotate(deg: number): void {\r\n    this.rotation = (this.rotation + deg) % 360\r\n    // Для rotate используем transition, если включена опция\r\n    this.applyTransform(true)\r\n  }\r\n\r\n  /**\r\n   * Get current transform state\r\n   * @returns Current transform object with scale, x, y, and rotation values\r\n   */\r\n  public getTransform(): Transform {\r\n    return {\r\n      scale: this.scale,\r\n      x: this.x,\r\n      y: this.y,\r\n      rotation: this.rotation,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set transform state\r\n   * @param transform - Transform object with scale, x, y, and/or rotation values to set\r\n   */\r\n  public setTransform(transform: Partial<Transform>): void {\r\n    if (transform.scale !== undefined) {\r\n      this.scale = this.clampScale(transform.scale)\r\n    }\r\n    if (transform.x !== undefined) {\r\n      this.x = transform.x\r\n    }\r\n    if (transform.y !== undefined) {\r\n      this.y = transform.y\r\n    }\r\n    if (transform.rotation !== undefined) {\r\n      this.rotation = transform.rotation\r\n    }\r\n    \r\n    // Для setTransform используем transition, если включена опция\r\n    this.applyTransform(true)\r\n  }\r\n\r\n  /**\r\n   * Destroy instance and remove all event listeners\r\n   */\r\n  public destroy(): void {\r\n    this.stopAnimation()\r\n    \r\n    if (this.transitionTimeout) {\r\n      clearTimeout(this.transitionTimeout)\r\n    }\r\n\r\n    this.container.removeEventListener('wheel', this.boundWheel)\r\n    this.content.removeEventListener('pointerdown', this.boundPointerDown)\r\n    this.content.removeEventListener('dblclick', this.boundDoubleClick)\r\n    window.removeEventListener('pointermove', this.boundPointerMove)\r\n    window.removeEventListener('pointerup', this.boundPointerUp)\r\n\r\n    this.container.removeEventListener('touchstart', this.boundTouchStart)\r\n    this.container.removeEventListener('touchmove', this.boundTouchMove)\r\n    this.container.removeEventListener('touchend', this.boundTouchEnd)\r\n\r\n    this.content.style.transform = ''\r\n    this.content.style.touchAction = ''\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * Factory function to create a new ImagePanZoom instance\r\n * @param container - Container element to hold the content\r\n * @param content - Content element to apply pan and zoom to\r\n * @param options - Options to configure the behavior\r\n * @returns A new ImagePanZoom instance\r\n */\r\nexport function createImagePanZoom(\r\n  container: HTMLElement,\r\n  content: HTMLElement,\r\n  options?: ImagePanZoomOptions\r\n): ImagePanZoom {\r\n  return new ImagePanZoom(container, content, options)\r\n}"],"names":["ImagePanZoom","container","content","options","scale","x","y","rotation","isPanning","didMove","startClientX","startClientY","startX","startY","velocityX","velocityY","velocityScale","lastMoveTime","lastClientX","lastClientY","lastScale","animationFrameId","DRAG_THRESHOLD","touchStartDistance","touchStartScale","touchCenterX","touchCenterY","isPinching","lastTouchCenterX","lastTouchCenterY","isTransitioning","transitionTimeout","boundWheel","boundPointerDown","boundPointerMove","boundPointerUp","boundDoubleClick","boundTouchStart","boundTouchMove","boundTouchEnd","constructor","this","minScale","maxScale","initialScale","wheelZoomSpeed","boundsPadding","friction","maxSpeed","transition","pinchSpeed","onWheel","bind","onPointerDown","onPointerMove","onPointerUp","onDoubleClick","onTouchStart","onTouchMove","onTouchEnd","init","style","touchAction","userSelect","applyTransform","attachEvents","addEventListener","passive","window","getSizes","contRect","getBoundingClientRect","contW","width","contH","height","pad","Math","min","rawW","offsetWidth","rawH","offsetHeight","w","h","clampPosition","nextX","nextY","fitsHorizontally","fitsVertically","minX","maxX","minY","maxY","halfContW","halfW","halfContH","halfH","max","useTransition","overflow","position","minHeight","top","left","transformOrigin","clamped","clearTimeout","setTimeout","transform","clampScale","next","stopAnimation","cancelAnimationFrame","zoomToPoint","clientX","clientY","deltaScale","rect","prevScale","nextScale","cx","cy","centerX","centerY","localX","localY","k","newLocalX","newLocalY","animateKinetic","abs","requestAnimationFrame","e","preventDefault","factor","deltaY","button","Date","now","setPointerCapture","pointerId","dx","dy","hypot","dt","vx","vy","scaleVelocity","releasePointerCapture","clickX","clickY","targetScale","scaleRatio","touches","length","touch1","touch2","dist","touch","syntheticEvent","PointerEvent","currentDist","currentCenterX","currentCenterY","scaleMultiplier","newScale","clampedScale","deltaX","scaleFactor","reset","rotate","deg","getTransform","setTransform","destroy","removeEventListener","createImagePanZoom"],"mappings":"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"}